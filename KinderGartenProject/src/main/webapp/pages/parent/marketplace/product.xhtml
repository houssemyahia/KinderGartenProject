<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:xlink="http://www.w3.org/1999/xlink">

<body>
	<ui:composition xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		template="/template/template.xhtml">

		<f:metadata>
			<f:viewParam name="ref" value="#{cartController.ref}" />
			<f:viewParam name="id" value="#{productController.id}" />
			<f:viewAction action="#{productController.onload()}" />
		</f:metadata>

		<ui:define name="content">
			<div class="content-grid">
				<div class="section-banner"
					style="background: url(resources/img/banner/banner-bg.png) no-repeat 50%">
					<!-- SECTION BANNER ICON -->
					<img class="section-banner-icon"
						src="resources/img/banner/marketplace-icon.png"
						alt="marketplace-icon" />
					<!-- /SECTION BANNER ICON -->

					<!-- SECTION BANNER TITLE -->

					<p class="section-banner-title">Marketplace</p>
					<!-- /SECTION BANNER TITLE -->

					<!-- SECTION BANNER TEXT -->

					<p class="section-banner-text">The best place for the community
						to buy and sell!</p>
					<!-- /SECTION BANNER TEXT -->
				</div>

				<div class="section-header">
					<!-- SECTION HEADER INFO -->

					<div class="section-header-info">
						<!-- SECTION PRETITLE -->

						<p class="section-pretitle">Currently at:</p>
						<!-- /SECTION PRETITLE -->

						<!-- SECTION TITLE -->

						<h2 class="section-title">
							<span class="highlighted">#{productController.getProductbyId(productController.id).name}</span>'s
							Offers
						</h2>

						<h:link outcome="browseproducts"
							styleClass="section-header-action">
							<h:outputText styleClass="section-pretitle" value="Browse All"></h:outputText>
						</h:link>
						<!-- /SECTION TITLE -->
					</div>
					<!-- /SECTION HEADER INFO -->
					<!-- SECTION HEADER ACTIONS -->

					<div class="section-header-actions">
						<!-- SECTION HEADER SUBSECTION -->
						<a class="section-header-subsection" href="marketplace.html">Marketplace</a>
						<!-- /SECTION HEADER SUBSECTION -->
						<!-- /SECTION HEADER SUBSECTION -->

						<!-- SECTION HEADER SUBSECTION -->

						<p class="section-header-subsection">#{productController.getProductbyId(productController.id).name}</p>
						<!-- /SECTION HEADER SUBSECTION -->
					</div>
					<!-- /SECTION HEADER ACTIONS -->
				</div>

				<div class="grid grid-9-3">


					<div class="marketplace-content grid-column">
						<!-- SLIDER PANEL -->

						<!-- TAB BOX -->




						<div class="table-wrap" data-simplebar="init">
							<div class="simplebar-wrapper" style="margin: 0px;">



								<!-- TABLE -->

								<div class="table table-downloads split-rows">
									<!-- TABLE HEADER -->

									<div class="table-header">
										<!-- TABLE HEADER COLUMN -->

										<div class="table-header-column">
											<!-- TABLE HEADER TITLE -->

											<p class="table-header-title">Seller</p>
											<!-- /TABLE HEADER TITLE -->
										</div>
										<!-- /TABLE HEADER COLUMN -->

										<!-- TABLE HEADER COLUMN -->

										<div class="table-header-column padded">
											<!-- TABLE HEADER TITLE -->

											<p class="table-header-title">Seller's Ratings</p>
											<!-- /TABLE HEADER TITLE -->
										</div>
										<!-- /TABLE HEADER COLUMN -->

										<!-- TABLE HEADER COLUMN -->

										<div class="table-header-column padded">
											<!-- TABLE HEADER TITLE -->

											<p class="table-header-title">Price</p>
											<!-- /TABLE HEADER TITLE -->
										</div>
										<!-- /TABLE HEADER COLUMN -->

										<!-- TABLE HEADER COLUMN -->

										<div class="table-header-column padded">
											<!-- TABLE HEADER TITLE -->

											<p class="table-header-title">Quantity</p>
											<!-- /TABLE HEADER TITLE -->
										</div>
										<!-- /TABLE HEADER COLUMN -->

										<!-- TABLE HEADER COLUMN -->

										<div class="table-header-column padded-left" />
										<!-- /TABLE HEADER COLUMN -->
									</div>
									<!-- /TABLE HEADER -->

									<!-- TABLE BODY -->

									<ui:repeat value="#{productController.getOffers()}" var="offer">
										<div class="table-body same-color-rows">

											<!-- TABLE ROW -->

											<div class="table-row medium">
												<!-- TABLE COLUMN -->

												<div class="table-column">
													<!-- PRODUCT PREVIEW -->

													<div class="product-preview tiny">
														<!-- PRODUCT PREVIEW IMAGE -->
														<a href="marketplace-product.html"> <figure
																class="product-preview-image short liquid"
																style="background: url(&quot;resources/img/badge/gempost-b.png&quot;) center center / cover no-repeat;">
															<img src="resources/img/badge/gempost-b.png"
																alt="item-11" style="display: none;" /> </figure>
														</a>
														<!-- /PRODUCT PREVIEW IMAGE -->

														<!-- PRODUCT PREVIEW INFO -->

														<div class="product-preview-info">
															<!-- PRODUCT PREVIEW TITLE -->


															<p class="product-preview-creator">
																<a href="profile-timeline.html">Offer By</a>
															</p>

															<p class="product-preview-category digital">
																<a href="marketplace-category.html">#{offer.kindergarten.name}</a>
															</p>

														</div>

													</div>

												</div>

												<div class="table-column padded">

													<div class="button with-only-icon popup-review-trigger">
														<!-- RATING LIST -->

														<div class="rating-list">
															<!-- RATING -->

															<div class="rating dark filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->

															<!-- RATING -->

															<div class="rating dark filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->

															<!-- RATING -->

															<div class="rating dark filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->

															<!-- RATING -->

															<div class="rating dark filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->

															<!-- RATING -->

															<div class="rating dark filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->
														</div>
														<!-- /RATING LIST -->
													</div>
												</div>
												<!-- /TABLE COLUMN -->

												<!-- TABLE COLUMN -->

												<!-- /TABLE COLUMN -->

												<!-- TABLE COLUMN -->

												<div class="table-column padded">
													<!-- PRICE TITLE -->

													<p class="price-title">
														#{offer.price} <span class="currency">DT</span>
													</p>
													<!-- /PRICE TITLE -->
												</div>

												<div class="table-column padded">
													<!-- TABLE TITLE -->

													<p class="table-title">#{offer.qty}</p>
													<!-- /TABLE TITLE -->
												</div>
												<!-- /TABLE COLUMN -->

												<!-- TABLE COLUMN -->

												<div class="table-column padded-left">
													<!-- TABLE ACTIONS -->

													<h:panelGroup
														rendered="#{!productController.inCart(offer.id)}">
														<div class="table-actions">
															<!-- BUTTON -->
															<h:form>
																<h:commandButton styleClass="button secondary"
																	value="Add to Cart"
																	action="#{cartController.addToCart(offer)}">
																</h:commandButton>
															</h:form>
															<!-- /BUTTON -->
														</div>
													</h:panelGroup>
													<h:panelGroup
														rendered="#{productController.inCart(offer.id)}">
														<div class="table-actions">
															<!-- BUTTON -->
															<h:form>
																<h:outputText value="You have already added this." />
															</h:form>
															<!-- /BUTTON -->
														</div>
													</h:panelGroup>
													<!-- /TABLE ACTIONS -->
												</div>
												<!-- /TABLE COLUMN -->
											</div>
										</div>
									</ui:repeat>

									<!-- /TABLE BODY -->
								</div>

							</div>
						</div>

					</div>


					<div class="container">
						<div class="row">
							<h:panelGroup id="field">
								<div class="marketplace-sidebar">

									<!-- MARKETPLACE CONTENT -->
									<div class="sidebar-box" style="margin-top: 65px">
										<!-- SIDEBAR BOX ITEMS -->

										<div class="sidebar-box-items">
											<!-- PRICE TITLE -->

											<!-- /PRICE TITLE -->
											<div class="row d-flex justify-content-center">
												<div class="col-6">

													<img class="badge-item-stat-image"
														src="resources/img/badge/rulerm-b.png"
														alt="badge-rulerm-b" />
													<!-- /BADGE ITEM STAT IMAGE -->

													<!-- BADGE ITEM STAT TITLE -->

													<!-- /BADGE ITEM STAT TEXT -->

													<!-- PROGRESS STAT -->

													<!-- /PROGRESS STAT -->
												</div>

												<h3 class="badge-item-stat-title" style="margin-top: 10px">Recommanded
													Offer</h3>
												<!-- /BADGE ITEM STAT TITLE -->

												<!-- BADGE ITEM STAT TEXT -->
												<br />
												<p class="price-title big">

													<h:outputText
														value=" #{productController.getPrice(productController.id)} "></h:outputText>
													<span class="currency">DT</span>
												</p>
											</div>
											<p class="button primary">Add to Your Cart!</p>


											<!-- USER STATS -->

											<div class="user-stats">
												<!-- USER STAT -->

												<div class="user-stat big">
													<!-- USER STAT TITLE -->

													<p class="user-stat-title">
														<h:outputText
															value="#{productController.getSoldNumber(productController.id)}"></h:outputText>
													</p>
													<!-- /USER STAT TITLE -->

													<!-- USER STAT TEXT -->

													<p class="user-stat-text">sales</p>
													<!-- /USER STAT TEXT -->
												</div>
												<!-- /USER STAT -->

												<!-- USER STAT -->

												<div class="user-stat big">
													<!-- USER STAT TITLE -->

													<p class="user-stat-title">
														<h:outputText
															value="#{productController.getProductRating(productController.id)}"></h:outputText>
														/5
													</p>
													<!-- /USER STAT TITLE -->

													<!-- RATING LIST -->

													<div class="rating-list">
														<!-- RATING -->

														<ui:repeat
															value="#{productController.fillStars(productController.id)}"
															var="i">
															<div class="rating filled">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
															<!-- /RATING -->
														</ui:repeat>
														<!-- RATING -->


														<ui:repeat
															value="#{productController.unfillStars(productController.id)}"
															var="i">
															<div class="rating">
																<!-- RATING ICON -->
																<svg class="rating-icon icon-star"> <use
																	xlink:href="#svg-star" /> </svg>
																<!-- /RATING ICON -->
															</div>
														</ui:repeat>
														<!-- /RATING -->

														<!-- /RATING -->
													</div>
													<!-- /RATING LIST -->

												</div>
												<!-- /USER STAT -->
											</div>
											<!-- /USER STATS -->

											<h:form>
												<h:commandButton styleClass="button bg-warning"
													action="#{productController.setFulllink()}"
													value="Generate referral link!">
													<f:ajax render="field" />
												</h:commandButton>
											</h:form>

											<h:panelGroup rendered="#{productController.rendered}">
												<div class="row">
													<div class="col-sm-12">
														<p class="checkbox-info-text align-self-justify"
															style="margin: 20px 0px 0px 0px;">Share this link and
															gain</p>
														<span class="highlighted">KinderPoints!</span>
														<h:inputText id="linktext"
															value="#{productController.fulllink}" />

														<!-- /BUTTON -->
													</div>
												</div>
											</h:panelGroup>

										</div>
										<!-- /SIDEBAR BOX ITEMS -->

										<!-- SIDEBAR BOX TITLE -->

									</div>
									<h:panelGroup rendered="#{productController.ifBought()}">
										<div class="sidebar-box" style="margin-top: 65px">
											<!-- SIDEBAR BOX ITEMS -->

											<div class="sidebar-box-items">


												<p class="checkbox-info-text">It looks like you already
													have bought this product</p>
												<br />
												<p class="checkbox-info-text">Would you please rate this
													product ?</p>

												<form class="form" style="margin-top: 50px">
													<!-- FORM ROW -->

													<div class="form-row">
														<!-- FORM ITEM -->

														<div class="form-item">
															<!-- FORM RATING WRAP -->

															<div class="form-rating-wrap">
																<label>Select Stars Rating:</label>
																<!-- RATING LIST -->

																<div class="rating-list form-rating" data-rating="4">
																	<!-- RATING -->

																	<div class="rating medium filled">
																		<!-- RATING ICON -->
																		<h:form>
																			<h:commandLink
																				action="#{productController.setRate(1)}">
																				<svg class="rating-icon medium icon-star"> <use
																					xlink:href="#svg-star" /> </svg>
																				<f:ajax execute="@form" render="@form" />
																			</h:commandLink>
																		</h:form>
																		<!-- /RATING ICON -->
																	</div>
																	<!-- /RATING -->

																	<!-- RATING -->

																	<div class="rating medium filled">
																		<!-- RATING ICON -->
																		<h:form>
																			<h:commandLink
																				action="#{productController.setRate(2)}">
																				<svg class="rating-icon medium icon-star"> <use
																					xlink:href="#svg-star" /> </svg>
																				<f:ajax execute="@form" render="@form" />
																			</h:commandLink>
																		</h:form>
																		<!-- /RATING ICON -->
																	</div>
																	<!-- /RATING -->

																	<!-- RATING -->

																	<div class="rating medium filled">
																		<!-- RATING ICON -->
																		<h:form>
																			<h:commandLink
																				action="#{productController.setRate(3)}">
																				<svg class="rating-icon medium icon-star"> <use
																					xlink:href="#svg-star" /> </svg>
																				<f:ajax execute="@form" render="@form" />
																			</h:commandLink>
																		</h:form>
																		<!-- /RATING ICON -->
																	</div>
																	<!-- /RATING -->

																	<!-- RATING -->

																	<div class="rating medium filled">
																		<!-- RATING ICON -->
																		<h:form>
																			<h:commandLink
																				action="#{productController.setRate(4)}">
																				<svg class="rating-icon medium icon-star"> <use
																					xlink:href="#svg-star" /> </svg>
																				<f:ajax execute="@form" render="@form" />
																			</h:commandLink>
																		</h:form>
																		<!-- /RATING ICON -->
																	</div>
																	<!-- /RATING -->

																	<!-- RATING -->

																	<div class="rating medium">
																		<!-- RATING ICON -->
																		<h:form>
																			<h:commandLink
																				action="#{productController.setRate(5)}">
																				<svg class="rating-icon medium icon-star"> <use
																					xlink:href="#svg-star" /> </svg>
																				<f:ajax execute="@form" render="@form" />
																			</h:commandLink>
																		</h:form>
																		<!-- /RATING ICON -->
																	</div>
																	<!-- /RATING -->
																</div>
																<!-- /RATING LIST -->
															</div>
															<!-- /FORM RATING WRAP -->
														</div>
														<!-- /FORM ITEM -->
													</div>
													<!-- /FORM ROW -->
													<!-- FORM ROW -->


													<!-- /FORM ROW -->
													<!-- FORM ROW -->
<h:form>
													<div class="form-row" style="margin-top: 20px">
														<!-- FORM ITEM -->

														<div class="form-item">
															<!-- FORM INPUT -->

															<div class="form-input">
																<label for="rating-description">Rating
																	Description</label>
																
																	<h:inputTextarea id="rating-description"
																		name="rating_description"
																		value="#{productController.review}">
														
																	</h:inputTextarea>
																
															</div>
															<!-- /FORM INPUT -->
														</div>
														<!-- /FORM ITEM -->
													</div>
													<!-- /FORM ROW -->
													<!-- POPUP BOX ACTIONS -->

													<div class="popup-box-actions full void">
														<!-- POPUP BOX ACTION -->
													
															<h:commandButton styleClass="full button secondary"
																value="Save	Review!"
																action="#{productController.doReview()}">
															</h:commandButton>
														
														<!-- /POPUP BOX ACTION -->
														<!-- POPUP BOX ACTION TEXT -->

														<p class="popup-box-action-text" style="margin-top: 20px">Your
															review and reason will be publicly visible to help other
															people when choosing their items!</p>
														<!-- /POPUP BOX ACTION TEXT -->
													</div>
</h:form>

												</form>
												<!-- /POPUP BOX ACTIONS -->
											</div>

											<!-- /SIDEBAR BOX ITEMS -->
											<!-- SIDEBAR BOX TITLE -->

										</div>
									</h:panelGroup>
								</div>
							</h:panelGroup>
						</div>
					</div>


				</div>
			</div>
		</ui:define>


	</ui:composition>


	<script src="app.bundle.min.js"></script>

</body>

</html>